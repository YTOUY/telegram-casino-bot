# Полная документация API для работы с подарками в Telegram

## Premium Gift Codes (Коды подарков Premium)

### 1. `ApplyGiftCodeRequest`
**Назначение:** Применяет код подарка Premium к аккаунту  
**Параметры:**
- `slug` (string) - идентификатор кода подарка

**Возвращает:** `Update` - обновление о применении кода

**Использование:** Когда пользователь хочет активировать полученный код подарка Premium

---

### 2. `CheckGiftCodeRequest`
**Назначение:** Проверяет валидность и получает информацию о коде подарка Premium  
**Параметры:**
- `slug` (string) - идентификатор кода подарка

**Возвращает:** `CheckedGiftCode` - информация о коде (отправитель, дата создания, количество месяцев Premium и т.д.)

**Использование:** Перед применением кода для проверки его валидности и получения информации

---

### 3. `CheckCanSendGiftRequest`
**Назначение:** Проверяет, можно ли отправить подарок конкретному пользователю  
**Параметры:**
- `gift_id` (long) - ID подарка для отправки

**Возвращает:** `CheckCanSendGiftResult` - результат проверки (Ok/Fail)

**Использование:** Перед отправкой подарка для проверки возможности отправки

---

## StarGift (Подарки-звезды) - Основные операции

### 4. `GetSavedStarGiftRequest`
**Назначение:** Получает информацию о сохраненных подарках-звездах  
**Параметры:**
- `targift` (InputSavedStarGift[]) - список подарков для получения информации

**Возвращает:** `SavedStarGift[]` - массив информации о подарках

**Использование:** Для получения детальной информации о сохраненных подарках

---

### 5. `SaveStarGiftRequest`
**Назначение:** Сохраняет подарок-звезду в профиль или удаляет из сохраненных  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для сохранения/удаления
- `unsave` (flag, опционально) - если true, удаляет из сохраненных

**Возвращает:** `Bool` - успех операции

**Использование:** Для сохранения полученных подарков в профиль или удаления их

---

### 6. `TransferStarGiftRequest`
**Назначение:** Передает подарок-звезду другому пользователю  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для передачи
- `to_id` (InputPeer) - получатель подарка

**Возвращает:** `Update` - обновление о передаче подарка

**Использование:** Для отправки подарка другому пользователю

---

### 7. `GetStarGiftWithdrawalUrlRequest` ⭐
**Назначение:** Получает URL для вывода подарка (создает ссылку на подарок)  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для создания ссылки
- `password` (InputCheckPasswordSRP) - пароль для подтверждения (если требуется)

**Возвращает:** `StarGiftWithdrawalUrl` - объект с URL для вывода подарка

**Использование:** **Для создания ссылок на подарки, которые пользователи будут отправлять релаеру**

---

### 8. `GetUniqueStarGiftRequest`
**Назначение:** Получает информацию об уникальном подарке-звезде по slug  
**Параметры:**
- `slug` (string) - идентификатор уникального подарка

**Возвращает:** `UniqueStarGift` - информация об уникальном подарке

**Что содержит `UniqueStarGift`:**
- `id` (long) - уникальный ID подарка
- `emoji` (string) - эмодзи подарка
- `slug` (string) - идентификатор подарка (тот же, что был передан в запросе)
- `value` (StarAmount) - стоимость подарка в звездах
- `date` (int) - дата создания подарка (Unix timestamp)
- `from_id` (Peer) - информация об отправителе подарка
- Другие метаданные о подарке

**Использование:** Для получения детальной информации об уникальном подарке по его идентификатору (slug). Полезно для проверки существования подарка, его стоимости и других характеристик перед операциями с ним.

---

### 9. `GetUniqueStarGiftValueInfoRequest`
**Назначение:** Получает информацию о стоимости уникального подарка  
**Параметры:** (требуется проверка документации)

**Возвращает:** Информация о стоимости подарка

**Использование:** Для получения информации о стоимости уникального подарка

---

## StarGift Collections (Коллекции подарков)

### 10. `CreateStarGiftCollectionRequest`
**Назначение:** Создает коллекцию подарков-звезд  
**Параметры:**
- `peer` (InputPeer) - для кого создается коллекция
- `title` (string) - название коллекции
- `targift` (InputSavedStarGift[]) - список подарков в коллекции

**Возвращает:** `StarGiftCollection` - созданная коллекция

**Использование:** Для создания коллекций подарков в профиле

---

### 11. `GetStarGiftCollectionRequest`
**Назначение:** Получает информацию о коллекции подарков  
**Параметры:** (требуется проверка документации)

**Возвращает:** `StarGiftCollection` - информация о коллекции

**Использование:** Для получения информации о существующей коллекции

---

### 12. `UpdateStarGiftCollectionRequest`
**Назначение:** Обновляет коллекцию подарков (название, состав)  
**Параметры:**
- `peer` (InputPeer) - владелец коллекции
- `collection_id` (int) - ID коллекции
- `title` (string, опционально) - новое название
- `delete_targift` (InputSavedStarGift[], опционально) - подарки для удаления
- `add_targift` (InputSavedStarGift[], опционально) - подарки для добавления
- `order` (InputSavedStarGift[], опционально) - новый порядок подарков

**Возвращает:** `StarGiftCollection` - обновленная коллекция

**Использование:** Для изменения состава и названия коллекций

---

### 13. `DeleteStarGiftCollectionRequest`
**Назначение:** Удаляет коллекцию подарков  
**Параметры:**
- `peer` (InputPeer) - владелец коллекции
- `collection_id` (int) - ID коллекции для удаления

**Возвращает:** `Bool` - успех операции

**Использование:** Для удаления коллекций подарков

---

### 14. `ReorderStarGiftCollectionRequest`
**Назначение:** Изменяет порядок подарков в коллекции  
**Параметры:** (требуется проверка документации)

**Возвращает:** (требуется проверка документации)

**Использование:** Для изменения порядка отображения подарков в коллекции

---

## Дополнительные операции с подарками

### 15. `ConvertStarGiftRequest`
**Назначение:** Конвертирует подарок-звезду (возможно, в другую валюту или форму)  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для конвертации

**Возвращает:** `Bool` - успех операции

**Использование:** Для конвертации подарков в другую форму

---

### 16. `GetStarGiftRequest`
**Назначение:** Получает информацию о подарке-звезде  
**Параметры:** (требуется проверка документации)

**Возвращает:** Информация о подарке

**Использование:** Для получения информации о конкретном подарке

---

### 17. `GetStarGiftOptionRequest`
**Назначение:** Получает опции для подарка-звезды  
**Параметры:** (требуется проверка документации)

**Возвращает:** Опции подарка

**Использование:** Для получения доступных опций подарка

---

### 18. `GetStarGiftUpgradePreviewRequest`
**Назначение:** Получает превью обновления подарка (предпросмотр улучшенной версии)  
**Параметры:**
- `gift_id` (long) - ID подарка для обновления

**Возвращает:** `StarGiftUpgradePreview` - превью обновленного подарка

**Использование:** Для предпросмотра улучшенной версии подарка перед обновлением

---

### 19. `UpgradeStarGiftRequest`
**Назначение:** Обновляет подарок-звезду до улучшенной версии  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для обновления
- `keep_original_detail` (flag, опционально) - сохранять ли оригинальные детали

**Возвращает:** `Update` - обновление о обновлении подарка

**Использование:** Для улучшения подарка до более дорогой версии

---

### 20. `UpdateStarGiftPriceRequest`
**Назначение:** Обновляет цену подарка-звезды (для продажи)  
**Параметры:**
- `targift` (InputSavedStarGift) - подарок для изменения цены
- `resell_amount` (StarAmount) - новая цена для перепродажи

**Возвращает:** `Update` - обновление о изменении цены

**Использование:** Для установки цены при перепродаже подарка

---

### 21. `SendStarFormRequest`
**Назначение:** Отправляет форму для подарка-звезды  
**Параметры:** (требуется проверка документации)

**Возвращает:** (требуется проверка документации)

**Использование:** Для отправки формы с подарком

---

### 22. `ToggleStarGiftPinnedToTopRequest`
**Назначение:** Закрепляет/открепляет подарок вверху профиля  
**Параметры:** (требуется проверка документации)

**Возвращает:** (требуется проверка документации)

**Использование:** Для управления отображением подарков в профиле

---

### 23. `ToggleChatStarGiftNotificationRequest`
**Назначение:** Включает/выключает уведомления о подарках в чате  
**Параметры:** (требуется проверка документации)

**Возвращает:** (требуется проверка документации)

**Использование:** Для управления уведомлениями о подарках в чатах

---

## Важные замечания

1. **GetStarGiftWithdrawalUrlRequest** - это ключевой метод для создания ссылок на подарки, которые пользователи могут отправлять релаеру
2. Большинство методов требуют `InputSavedStarGift` - это объект, который идентифицирует сохраненный подарок
3. Для работы с подарками нужны соответствующие права доступа
4. Некоторые методы могут требовать пароль для подтверждения операций

## Источники

- [Telethon Methods - Payments](https://tl.telethon.dev/methods/payments/index.html)

